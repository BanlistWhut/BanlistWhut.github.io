(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{547:function(s,t,a){"use strict";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本"}},[s._v("#")]),s._v(" 版本")]),s._v(" "),a("p",[a("code",[s._v("Ubuntu20.04")])]),s._v(" "),a("h2",{attrs:{id:"eth-netplan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eth-netplan"}},[s._v("#")]),s._v(" ETH netplan")]),s._v(" "),a("p",[s._v("配置了 "),a("code",[s._v("/etc/network/interfaces")]),s._v(" 发现并未生效，得知需要修改 "),a("code",[s._v("/etc/netplan")]),s._v(" 的配置。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/netplan/00-installer-config.yaml\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第一种")]),s._v("\nnetwork:\n  ethernets:\n    enp5s0:\n      addresses: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.111/24"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      dhcp4: no\n      optional: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      gateway4: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.1\n      nameservers:\n        addresses: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("223.5")]),s._v(".5.5,223.6.6.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第二种奇怪的配置，但是也很好用")]),s._v("\nnetwork:\n  ethernets:\n    enp5s0:\n      addresses: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.111/24"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      dhcp4: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n  version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第二种的 ip addr 结果")]),s._v("\ninet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.111/24 brd "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.255 scope global enp5s0\nvalid_lft forever preferred_lft forever\ninet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.104/24 brd "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.255 scope global secondary dynamic enp5s0\nvalid_lft 7199sec preferred_lft 7199sec\n")])])]),a("p",[s._v("使配置生效：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" netplan generate\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" netplan apply\n")])])]),a("p",[s._v("配置完后同段内的机器可以 ping 通，并通过 ssh 进一步测试。")]),s._v(" "),a("h2",{attrs:{id:"安装驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装驱动"}},[s._v("#")]),s._v(" 安装驱动")]),s._v(" "),a("p",[s._v("如果有 WIFI 网卡，则可跳过安装驱动。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" addr\n")])])]),a("blockquote",[a("p",[s._v("折腾许久，才发现是 Linux 内核不支持老网卡。")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lshw -C network\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果")]),s._v("\n*-network UNCLAIMED "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未识别       ")]),s._v("\n       description: Network controller\n       product: BCM43142 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("802")]),s._v(".11b/g/n\n       vendor: Broadcom Inc. and subsidiaries\n       physical id: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n       bus info: pci@0000:04:00.0\n       version: 01\n       width: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bits\n       clock: 33MHz\n       capabilities: bus_master cap_list\n       configuration: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("latency")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n       resources: memory:e3500000-e3507fff\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt install firmware-b43-installer\n")])])]),a("p",[a("a",{attrs:{href:"https://askubuntu.com/questions/765584/is-it-possible-to-use-broadcom-bcm43142-wifi-in-ubuntu-16-04",target:"_blank",rel:"noopener noreferrer"}},[s._v("解决方案"),a("OutboundLink")],1),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" bcmwl-kernel-source\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改黑名单")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gedit /etc/modprobe.d/blacklist.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 追加")]),s._v("\nblacklist b43\nblacklist bcma\nblacklist ssb\n")])])]),a("p",[s._v("如果还有问题，可能需要修改 BIOS 的 "),a("code",[s._v("secrety root")]),s._v(" 为 "),a("code",[s._v("disabled")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"wifi-netplan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wifi-netplan"}},[s._v("#")]),s._v(" WIFI netplan")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/netplan/00-installer-config.yaml\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 wifi")]),s._v("\nwifis:\n    wlp4s0:\n      addresses: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.122/24"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      dhcp4: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n      optional: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      gateway4: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.1\n      nameservers:\n        addresses: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("223.5")]),s._v(".5.5,223.6.6.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      access-points:\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SSID"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n          password: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v("\n")])])]),a("p",[s._v("接着还需要启用 WIFI：")]),s._v(" "),a("blockquote",[a("p",[s._v("莫名奇妙测试出来的（也可能不用执行以下步骤），待后续正规化处理")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status netplan-wpa-wlp4s0.service "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据你对应的 wifi 名称")]),s._v("\nsystemctl daemon-reload\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);