(window.webpackJsonp=window.webpackJsonp||[]).push([[314],{691:function(s,t,e){"use strict";e.r(t);var n=e(27),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"linux-lvm-磁盘扩容-md"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-lvm-磁盘扩容-md"}},[s._v("#")]),s._v(" Linux LVM 磁盘扩容.md")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("物理卷 Physical Volume (PV)：")]),s._v(" 可以在上面建立卷组的媒介，可以是硬盘分区，也可以是硬盘本身或者回环文件（loopback file）。物理卷包括一个特殊的 header，其余部分被切割为一块块物理区域（physical extents）")]),s._v(" "),e("li",[e("strong",[s._v("卷组 Volume group (VG)：")]),s._v(" 将一组物理卷收集为一个管理单元")]),s._v(" "),e("li",[e("strong",[s._v("逻辑卷 Logical volume (LV)：")]),s._v(" 虚拟分区，由物理区域（physical extents）组成")]),s._v(" "),e("li",[e("strong",[s._v("物理区域 Physical extent (PE)：")]),s._v(" 硬盘可供指派给逻辑卷的最小单位（通常为 4MB）")])]),s._v(" "),e("h2",{attrs:{id:"磁盘操作相关命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#磁盘操作相关命令"}},[s._v("#")]),s._v(" 磁盘操作相关命令")]),s._v(" "),e("ul",[e("li",[s._v("查看挂载点")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下Filesystem                Size  Used Avail Use% Mounted on")]),s._v("\nudev                               955M     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  955M   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs                              198M  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".8M  196M   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 此处为我们磁盘的挂载点")]),s._v("\n/dev/mapper/ubuntu--vg-ubuntu--lv   19G  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".0G   12G  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v("% /\ntmpfs                              986M     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  986M   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs                              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /run/lock\ntmpfs                              986M     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  986M   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/loop1                          91M   91M     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% /snap/core/6350\n/dev/loop0                          89M   89M     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% /snap/core/6964\n/dev/sda2                          976M  143M  767M  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("% /boot\n")])])]),e("ul",[e("li",[s._v("显示当前的 logical volume："),e("code",[s._v("lvdisplay")])])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("lvdisplay\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Logical volume ---\nLV Path                /dev/ubuntu-vg/ubuntu-lv\nLV Name                ubuntu-lv\nVG Name                ubuntu-vg\nLV UUID                e2fKkR-oZeH-WV2A-ltCi-P76v-N9yv-aUtIg1\nLV Write Access        read/write\nLV Creation host, "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ubuntu-server, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-05-14 03:13:57 +0800\nLV Status              available\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# open                 1")]),s._v("\nLV Size                "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nCurrent LE             "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nSegments               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAllocation             inherit\nRead ahead sectors     auto\n- currently "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\nBlock device           "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0\n")])])]),e("ul",[e("li",[s._v("显示当前的 volume group")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("vgdisplay\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Volume group ---\nVG Name               ubuntu-vg\nSystem ID             \nFormat                lvm2\nMetadata Areas        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMetadata Sequence No  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nVG Access             read/write\nVG Status             resizable\nMAX LV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur LV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOpen LV               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMax PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAct PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 这里应该是你当前的可用空间大小，待扩容完毕，这里显示的应该是最终的大小")]),s._v("\nVG Size               "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nPE Size               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nAlloc PE / Size       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nFree  PE / Size       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nVG UUID               dhI9ns-7lOI-pXf8-IOWL-F96N-JIYG-ZF6u82\n")])])]),e("ul",[e("li",[s._v("显示当前的 physical volume")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pvdisplay\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Physical volume ---\nPV Name               /dev/sda3\nVG Name               ubuntu-vg\nPV Size               "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB / not usable "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nAllocatable           "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("but full"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPE Size               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nFree PE               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nAllocated PE          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nPV UUID               TDFe2b-xsce-R8So-ldxR-ohcp-fx5J-n2JNOa\n")])])]),e("h2",{attrs:{id:"开始-lvm-扩容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始-lvm-扩容"}},[s._v("#")]),s._v(" 开始 LVM 扩容")]),s._v(" "),e("h3",{attrs:{id:"查看-fdisk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看-fdisk"}},[s._v("#")]),s._v(" 查看 fdisk")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nUnits: sectors of "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n\nDisk /dev/loop1: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\nUnits: sectors of "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n\nDisk /dev/sda: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\nUnits: sectors of "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nDisklabel type: gpt\nDisk identifier: F96F20D7-1F28-4B03-87CF-4FA3E81FDE29\n\nDevice       Start      End  Sectors Size Type\n/dev/sda1     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\n\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\nUnits: sectors of "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n")])])]),e("h3",{attrs:{id:"查看所有储存设备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看所有储存设备"}},[s._v("#")]),s._v(" 查看所有储存设备")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nDisk /dev/loop1: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 目前只有一块磁盘 sda")]),s._v("\nDisk /dev/sda: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n/dev/sda1     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在虚拟机中挂载多一块磁盘，再操作")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectorsDisk /dev/loop1: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 挂载的第一块磁盘 sda")]),s._v("\nDisk /dev/sda: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n/dev/sda1     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 挂载的第二块磁盘sdb")]),s._v("\nDisk /dev/sdb: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\n")])])]),e("h3",{attrs:{id:"创建-sdb-分区"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-sdb-分区"}},[s._v("#")]),s._v(" 创建 sdb 分区")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" /dev/sdb\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nWelcome to "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("util-linux "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.31")]),s._v(".1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nChanges will remain "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" memory only, "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" you decide to "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" them.\nBe careful before using the "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" command.\n\nDevice does not contain a recognized partition table.\nCreated a new DOS disklabel with disk identifier 0x0de15f1d.\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 在此处输入命令")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## n：新建分区")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## l: 选择逻辑分区，如果没有，则首先创建主分区（p），然后再添加逻辑分区（硬盘最多四个分区 P-P-P-P 或 P-P-P-E）")]),s._v("\nCommand "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": n\nPartition "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("\n\tp   primary "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" primary, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" extended, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\te   extended "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("container "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" logical partitions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSelect "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n\nUsing default response p.\nPartition number "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-4, default "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nFirst sector "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-41943039, default "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\nLast sector, +sectors or +size"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("K,M,G,T,P"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-41943039, default "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943039")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n\nCreated a new partition "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" of "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Linux'")]),s._v(" and of size "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB.\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 在此处输入命令")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## w：写入磁盘")]),s._v("\nCommand "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": w\nThe partition table has been altered.\nCalling ioctl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to re-read partition table.\nSyncing disks.\n")])])]),e("h3",{attrs:{id:"格式化磁盘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#格式化磁盘"}},[s._v("#")]),s._v(" 格式化磁盘")]),s._v(" "),e("ul",[e("li",[s._v("查看分区")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nDisk /dev/loop1: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\nDisk /dev/sda: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n/dev/sda1     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\nDisk /dev/sdb: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 此时可以看见新创建的分区 /dev/sdb1")]),s._v("\n/dev/sdb1        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943039")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940992")]),s._v("  20G "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\n")])])]),e("ul",[e("li",[s._v("格式化")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkfs")]),s._v(" -t ext4 /dev/sdb1\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mke2fs")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.44")]),s._v(".1 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("-Mar-2018"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCreating filesystem with "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5242624")]),s._v(" 4k blocks and "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310720")]),s._v(" inodes\nFilesystem UUID: 6f11063f-c118-4099-90fc-2b083c181b23\nSuperblock backups stored on blocks: \n\t\t"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("98304")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("163840")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("229376")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("294912")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("819200")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("884736")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1605632")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2654208")]),s._v(",         \t\t"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096000")]),s._v("\n\t\t\nAllocating group tables: "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\nWriting inode tables: "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\nCreating journal "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(" blocks"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\nWriting superblocks and filesystem accounting information: "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),e("h3",{attrs:{id:"创建-pv"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-pv"}},[s._v("#")]),s._v(" 创建 PV")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pvcreate /dev/sdb1\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nWARNING: ext4 signature detected on /dev/sdb1 at offset "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(". Wipe it? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n\tWiping ext4 signature on /dev/sdb1.\n\tPhysical volume "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/sdb1"')]),s._v(" successfully created.\n")])])]),e("h3",{attrs:{id:"查看卷组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看卷组"}},[s._v("#")]),s._v(" 查看卷组")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pvscan\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nPV /dev/sda3   VG ubuntu-vg       lvm2 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    free"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nPV /dev/sdb1                      lvm2 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.00")]),s._v(" GiB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nTotal: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("39.00")]),s._v(" GiB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" no VG: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.00")]),s._v(" GiB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),e("h3",{attrs:{id:"扩容-vg"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#扩容-vg"}},[s._v("#")]),s._v(" 扩容 VG")]),s._v(" "),e("ul",[e("li",[s._v("查看 VG")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("vgdisplay\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Volume group ---\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 我们需要用到 VG Name")]),s._v("\nVG Name               ubuntu-vg\nSystem ID             \nFormat                lvm2\nMetadata Areas        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMetadata Sequence No  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nVG Access             read/write\nVG Status             resizable\nMAX LV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur LV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOpen LV               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMax PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAct PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nVG Size               "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nPE Size               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nAlloc PE / Size       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nFree  PE / Size       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nVG UUID               dhI9ns-7lOI-pXf8-IOWL-F96N-JIYG-ZF6u82\n")])])]),e("ul",[e("li",[s._v("扩容 VG")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("vgextend ubuntu-vg /dev/sdb1"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 输出如下Volume group "ubuntu-vg" successfully extended')]),s._v("\n")])])]),e("h3",{attrs:{id:"扩容-lv"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#扩容-lv"}},[s._v("#")]),s._v(" 扩容 LV")]),s._v(" "),e("ul",[e("li",[s._v("查看 VG")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("vgdisplay\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Volume group ---\nVG Name               ubuntu-vg\nSystem ID             \nFormat                lvm2\nMetadata Areas        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nMetadata Sequence No  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nVG Access             read/write\nVG Status             resizable\nMAX LV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur LV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOpen LV               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMax PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nAct PV                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nVG Size               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.99")]),s._v(" GiB\nPE Size               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9982")]),s._v("\nAlloc PE / Size       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 这里是可以扩容的大小")]),s._v("\nFree  PE / Size       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5119")]),s._v(" / "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.00")]),s._v(" GiB\nVG UUID               dhI9ns-7lOI-pXf8-IOWL-F96N-JIYG-ZF6u82\n")])])]),e("ul",[e("li",[s._v("查看 LV")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("lvdisplay\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Logical volume ---\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 我们需要用到 LV Path")]),s._v("\nLV Path                /dev/ubuntu-vg/ubuntu-lv\nLV Name                ubuntu-lv\nVG Name                ubuntu-vg\nLV UUID                e2fKkR-oZeH-WV2A-ltCi-P76v-N9yv-aUtIg1\nLV Write Access        read/write\nLV Creation host, "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ubuntu-server, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-05-14 03:13:57 +0800\nLV Status              available\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# open                 1")]),s._v("\nLV Size                "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nCurrent LE             "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nSegments               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAllocation             inherit\nRead ahead sectors     auto\n- currently "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\nBlock device           "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0\n")])])]),e("ul",[e("li",[s._v("扩容 LV")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按固定大小追加")]),s._v("\nlvextend -L +10G /dev/ubuntu-vg/ubuntu-lv\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按百分比追加")]),s._v("\nlvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nSize of logical volume ubuntu-vg/ubuntu-lv changed from "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" extents"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.99")]),s._v(" GiB "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9982")]),s._v(" extents"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nLogical volume ubuntu-vg/ubuntu-lv successfully resized.\n")])])]),e("ul",[e("li",[s._v("刷新分区")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("resize2fs /dev/ubuntu-vg/ubuntu-lv\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nFilesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" on-line resizing required\nold_desc_blocks "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", new_desc_blocks "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nThe filesystem on /dev/ubuntu-vg/ubuntu-lv is now "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10221568")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("4k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" blocks long.\n")])])]),e("ul",[e("li",[s._v("验证是否成功")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("lvdisplay\n\n--- Logical volume ---\nLV Path                /dev/ubuntu-vg/ubuntu-lv\nLV Name                ubuntu-lv\nVG Name                ubuntu-vg\nLV UUID                e2fKkR-oZeH-WV2A-ltCi-P76v-N9yv-aUtIg1\nLV Write Access        read/write\nLV Creation host, "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ubuntu-server, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-05-14 03:13:57 +0800\nLV Status              available\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# open                 1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 可以看到磁盘扩容成功了")]),s._v("\nLV Size                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.99")]),s._v(" GiB\nCurrent LE             "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9982")]),s._v("\nSegments               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nAllocation             inherit\nRead ahead sectors     auto\n- currently "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\nBlock device           "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0\n")])])]),e("blockquote",[e("p",[e("strong",[s._v("注意：")]),s._v(" 不要卸载扩容的磁盘，可能出现丢失数据或是系统无法启动")])])])}),[],!1,null,null,null);t.default=a.exports}}]);